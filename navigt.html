<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Pro E‑Commerce Navigation — Responsive Fix</title>

    <!-- Bootstrap CSS (5.x) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <style>
      :root{
        --nav-height: 72px;
        --accent: #0d6efd;
      }

      /* Page spacing so fixed-top doesn't overlap */
      body{padding-top: calc(var(--nav-height) + 8px);}

      /* NAV styling */
      .site-navbar{
        height: var(--nav-height);
        backdrop-filter: blur(6px);
        background: rgba(255,255,255,0.95);
        box-shadow: 0 6px 18px rgba(15, 23, 42, 0.06);
        transition: background .28s ease, transform .28s ease, box-shadow .28s ease;
      }

      /* Layout: ensure brand and icons never shrink; search grows/shrinks within bounds */
      .nav-inner{display:flex; align-items:center; gap:12px; width:100%;}
      .brand-wrap{flex:0 0 auto; display:flex; align-items:center}
      .nav-search{flex:1 1 520px; min-width:240px; max-width:720px}
      .icons-wrap{flex:0 0 auto; display:flex; align-items:center; gap:8px}

      /* Input group full width */
      .nav-search .input-group{width:100%}

      /* Polished micro-interactions */
      .nav-icon-btn{height:44px; width:44px; border-radius:10px; display:inline-flex; align-items:center; justify-content:center; transition:transform .12s ease, box-shadow .12s ease}
      .nav-icon-btn:hover{transform:translateY(-3px); box-shadow:0 8px 20px rgba(13,110,253,0.08)}

      .cart-badge{position:absolute; top:0; right:0; transform:translate(35%,-35%); font-size:11px}

      /* Offcanvas width and animation */
      .offcanvas-start{width:320px; transition:transform .32s cubic-bezier(.2,.9,.2,1)}
      .offcanvas-end{width:360px}

      /* Responsive visibility */
      @media (max-width: 991.98px){
        .desktop-only{display:none!important}
        .mobile-only{display:block!important}
        .nav-search{max-width:none}
      }

      @media (min-width: 992px){
        .desktop-only{display:block!important}
        .mobile-only{display:none!important}
      }

      /* Prevent input text overflow visually */
      input[type=search]{white-space:nowrap; overflow:hidden; text-overflow:ellipsis}

      /* Small accessibility helpers */
      .visually-hidden-focusable:focus{clip:auto; width:auto; height:auto; margin:0; overflow:visible}
    </style>
  </head>
  <body>

    <!-- NAVIGATION -->
    <nav class="navbar fixed-top site-navbar" aria-label="Main navigation">
      <div class="container-fluid">
        <div class="container-lg nav-inner">

          <!-- Brand + categories -->
          <div class="brand-wrap d-flex align-items-center gap-3">
            <a class="navbar-brand d-flex align-items-center" href="#" aria-label="Home">
              <img src="https://logo.com/image-cdn/images/kts928pd/production/88683355c0c634d79d7c2a943ed71c104e08d6b7-800x800.webp?w=512&q=70&fm=webp" alt="Brand logo" style="height:40px; width:auto;">
            </a>

            <!-- desktop category button -->
            <div class="dropdown desktop-only">
              <button class="btn btn-outline-secondary btn-sm d-flex align-items-center" id="catDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="bi bi-list me-2"></i> Categories
              </button>
              <ul class="dropdown-menu shadow" aria-labelledby="catDropdown">
                <li><a class="dropdown-item" href="#">Electronics</a></li>
                <li><a class="dropdown-item" href="#">Fashion</a></li>
                <li><a class="dropdown-item" href="#">Home & Garden</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="#">See all categories</a></li>
              </ul>
            </div>
          </div>

          <!-- Search (flexible) -->
          <form class="nav-search" role="search" aria-label="Search products">
            <div class="input-group">
              <span class="input-group-text bg-white border-end-0" id="search-addon"><i class="bi bi-search"></i></span>
              <input class="form-control border-start-0" type="search" placeholder="Search for products, brands and categories" aria-label="Search" aria-describedby="search-addon">
              <button class="btn btn-primary" type="submit">Search</button>
            </div>
          </form>

          <!-- Icons / mobile toggle -->
          <div class="icons-wrap align-items-center">

            <!-- Desktop icons -->
            <div class="d-flex gap-2 align-items-center desktop-only">
              <a href="#" class="nav-icon-btn position-relative text-decoration-none text-body" aria-label="Wishlist">
                <i class="bi bi-heart fs-5"></i>
              </a>

              <a href="#" id="cartBtn" class="nav-icon-btn position-relative text-decoration-none text-body" aria-label="Cart" data-bs-toggle="offcanvas" data-bs-target="#cartOffcanvas" aria-controls="cartOffcanvas">
                <i class="bi bi-bag fs-5"></i>
                <span class="badge bg-danger text-white cart-badge" id="cartCount">3</span>
              </a>

              <div class="dropdown">
                <a class="btn btn-outline-secondary btn-sm d-flex align-items-center" href="#" id="accountMenu" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="bi bi-person me-2"></i> Account
                </a>
                <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="accountMenu">
                  <li><a class="dropdown-item" href="signin.html">Sign In</a></li>
                  <li><a class="dropdown-item" href="#">My Orders</a></li>
                  <li><a class="dropdown-item" href="profile.html">Profile</a></li>
                </ul>
              </div>
            </div>

            <!-- Mobile hamburger -->
            <button class="btn btn-outline-secondary mobile-only d-flex align-items-center" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileMenu" aria-controls="mobileMenu" aria-label="Open menu">
              <i class="bi bi-list fs-4"></i>
            </button>

          </div>
        </div>
      </div>
    </nav>

    <!-- MOBILE OFFCANVAS -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="mobileMenu" aria-labelledby="mobileMenuLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="mobileMenuLabel">Menu</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body px-0">
        <div class="list-group list-group-flush">
          <a href="#" class="list-group-item list-group-item-action">Home</a>
          <a href="#" class="list-group-item list-group-item-action">Shop All</a>
          <a href="#" class="list-group-item list-group-item-action">Categories</a>
          <a href="#" class="list-group-item list-group-item-action">Deals</a>
          <a href="#" class="list-group-item list-group-item-action">New Arrivals</a>
          <a href="#" class="list-group-item list-group-item-action">Contact</a>
        </div>

        <hr>

        <div class="px-3">
          <a href="#" class="d-flex align-items-center gap-2 mb-2">
            <i class="bi bi-person-circle fs-4"></i> <strong>Sign in</strong>
          </a>

          <a href="#" class="d-flex align-items-center gap-2 mb-2">
            <i class="bi bi-bag fs-4"></i> <strong>Cart</strong>
            <span class="badge bg-danger ms-auto">3</span>
          </a>

          <div class="mt-3 small text-muted">© <span id="year"></span> Your Store</div>
        </div>
      </div>
    </div>

    <!-- CART OFFCANVAS -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="cartOffcanvas" aria-labelledby="cartOffcanvasLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="cartOffcanvasLabel">Your Cart</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <div class="d-flex gap-3 mb-3 align-items-center">
          <img src="https://via.placeholder.com/64" alt="product" class="rounded" width="64">
          <div class="flex-grow-1">
            <div class="fw-bold">Wireless Headphones</div>
            <div class="small text-muted">Qty 1 • $79.00</div>
          </div>
          <div class="fw-semibold">$79</div>
        </div>

        <div class="d-flex justify-content-between align-items-center pb-3 border-bottom">
          <div class="fw-bold">Subtotal</div>
          <div class="fw-bold">$237.00</div>
        </div>

        <div class="mt-3 d-grid">
          <a href="#" class="btn btn-primary">Checkout</a>
          <a href="#" class="btn btn-outline-secondary mt-2">View Cart</a>
        </div>
      </div>
    </div>

    <!-- PAGE CONTENT (placeholder) -->
    <main class="container-lg mt-5">
      <div class="py-5 text-center">
        <h1 class="display-6">E‑Commerce Site</h1>
        <p class="lead text-muted">Navigation updated for better desktop responsiveness. Replace placeholders with your store assets.</p>
      </div>

      <div class="row">
        <div class="col-md-8">
          <p>Product listings would go here. The navigation above uses flexbox to ensure the brand and icons never get pushed off-screen; the search area grows within set min/max widths.</p>
        </div>
        <div class="col-md-4">
          <div class="card p-3">
            <h5 class="card-title">Quick Tips</h5>
            <ul class="small">
              <li>Adjust --accent to your brand color.</li>
              <li>Set realistic search max-width for very large screens.</li>
              <li>Replace logo placeholder with your SVG/PNG.</li>
            </ul>
          </div>
        </div>
      </div>
    </main>

    <!-- Bootstrap JS bundle (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // Small JS helpers
      document.getElementById('year').textContent = new Date().getFullYear();

      function animateCartCount(){
        const el = document.getElementById('cartCount');
        if(!el) return;
        el.animate([
          { transform: 'scale(1)', offset: 0 },
          { transform: 'scale(1.35)', offset: 0.4 },
          { transform: 'scale(1)', offset: 1 }
        ], { duration: 360, easing: 'cubic-bezier(.2,.9,.2,1)' });
      }

      const cartOff = document.getElementById('cartOffcanvas');
      if(cartOff){
        cartOff.addEventListener('show.bs.offcanvas', function(){ animateCartCount(); });
      }

      const mobileMenu = document.getElementById('mobileMenu');
      if(mobileMenu){
        mobileMenu.addEventListener('show.bs.offcanvas', () => {
          document.querySelectorAll('.dropdown.show').forEach(dd => {
            const toggle = dd.querySelector('[data-bs-toggle="dropdown"]');
            if(toggle) new bootstrap.Dropdown(toggle).hide();
          });
        });
      }

      // Demo: prevent search navigation during preview
      document.querySelectorAll('form[role="search"]').forEach(form => {
        form.addEventListener('submit', (e) => {
          e.preventDefault();
          const q = form.querySelector('input[type="search"]').value.trim();
          if(!q) return;
          alert('Search requested: ' + q);
        });
      });

      // Optional: keep the navbar compact on very small screens by reducing search placeholder length
      function adjustPlaceholder(){
        const input = document.querySelector('.nav-search input[type="search"]');
        if(!input) return;
        if(window.innerWidth < 420) input.placeholder = 'Search products';
        else input.placeholder = 'Search for products, brands and categories';
      }
      window.addEventListener('resize', adjustPlaceholder);
      adjustPlaceholder();
    </script>
  </body>
</html>
